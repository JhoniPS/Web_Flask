{%from 'macros/form.html' import render_form%}
{%extends 'layout.html'%}

{%block style%}
{{super()}}
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
<link rel="stylesheet" href="{{ url_for('main.static', filename='css/swiper.css') }}">
{%endblock style%}

{%block body%}
<section class="has-background-light">
    <div class="box">
        <div class="container is-max-widescreen">
            <nav class="level">
                <div class="level-left">
                    <div class="level-item mr-6">
                        <a href="{{url_for('main.home')}}">
                            <h1 class="title">Fotogram</h1>
                        </a>
                    </div>
                    <div class="level-item ml-6">
                        <div class="field has-addons">
                            <p class="control">
                                <input class="input" type="text" placeholder="Find a post">
                            </p>
                            <p class="control">
                                <button class="button">
                                    Search
                                </button>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="level-right">
                    <a href="{{url_for('main.home')}}" class="mx-2">
                        <button class="h-10 px-5 font-semibold rounded-md bg-blue-500 hover:bg-blue-700 text-white" type="submit">
                            Home
                        </button>
                    </a>

                    <a href="{{url_for('post.new')}}" class="mx-2">
                        <button class="h-10 px-5 text-white font-semibold rounded-md border bg-green-500 hover:bg-green-700 border-slate-200 text-slate-900" type="button">
                            Novo Post
                        </button>
                    </a>
                </div>
            </nav>
        </div>
    </div>

    <div class="container is-max-widescreen">
        <div class="columns">
            <div class="column is-three-quarters">
                {%for post in posts%}
                <div class="box my-2">
                    <div class="swiper-container">
                        <div class="swiper-wrapper">
                            {%for image in post.images.all()%}
                            <div class="swiper-slide swiper-zoom-container">
                                <img src="{{url_for('post.static', filename='images/' + image.name)}}"
                                     class="swiper-lazy">
                            </div>
                            {%endfor%}
                        </div>
                    </div>

                    <button class="button m-2 {%if current_user not in post.user_liked%}
                            is-dark
                            {%else%}
                                is-danger
                            {%endif%} is-inverted"
                            onclick="like_unlike({{post.id}}, this)"
                    >
                        <i class="fas fa-heart fa-2x"></i>
                    </button>
                </div>

                <div class="box my-2">
                    Descrição: {{post.caption}}
                </div>
                {%endfor%}

            </div>

        </div>
    </div>
</section>
{%endblock body%}

{%block script%}
{{super()}}
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="{{ url_for('main.static', filename='js/swiper.js') }}"></script>
<script src="{{ url_for('main.static', filename='js/script.js') }}"></script>
{%endblock script%}
